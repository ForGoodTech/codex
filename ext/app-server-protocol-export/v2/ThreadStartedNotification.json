{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "Annotations": {
      "description": "Optional annotations for the client. The client can use annotations to inform how objects are used or displayed",
      "properties": {
        "audience": {
          "items": {
            "$ref": "#/definitions/Role"
          },
          "type": [
            "array",
            "null"
          ]
        },
        "lastModified": {
          "type": [
            "string",
            "null"
          ]
        },
        "priority": {
          "format": "double",
          "type": [
            "number",
            "null"
          ]
        }
      },
      "type": "object"
    },
    "AudioContent": {
      "description": "Audio provided to or from an LLM.",
      "properties": {
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/definitions/Annotations"
            },
            {
              "type": "null"
            }
          ]
        },
        "data": {
          "type": "string"
        },
        "mimeType": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "data",
        "mimeType",
        "type"
      ],
      "type": "object"
    },
    "BlobResourceContents": {
      "properties": {
        "blob": {
          "type": "string"
        },
        "mimeType": {
          "type": [
            "string",
            "null"
          ]
        },
        "uri": {
          "type": "string"
        }
      },
      "required": [
        "blob",
        "uri"
      ],
      "type": "object"
    },
    "CodexErrorInfo": {
      "description": "This translation layer make sure that we expose codex error code in camel case.\n\nWhen an upstream HTTP status is available (for example, from the Responses API or a provider), it is forwarded in `httpStatusCode` on the relevant `codexErrorInfo` variant.",
      "oneOf": [
        {
          "enum": [
            "contextWindowExceeded",
            "usageLimitExceeded",
            "internalServerError",
            "unauthorized",
            "badRequest",
            "sandboxError",
            "other"
          ],
          "type": "string"
        },
        {
          "additionalProperties": false,
          "properties": {
            "httpConnectionFailed": {
              "properties": {
                "httpStatusCode": {
                  "format": "uint16",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                }
              },
              "type": "object"
            }
          },
          "required": [
            "httpConnectionFailed"
          ],
          "title": "HttpConnectionFailedCodexErrorInfo",
          "type": "object"
        },
        {
          "additionalProperties": false,
          "description": "Failed to connect to the response SSE stream.",
          "properties": {
            "responseStreamConnectionFailed": {
              "properties": {
                "httpStatusCode": {
                  "format": "uint16",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                }
              },
              "type": "object"
            }
          },
          "required": [
            "responseStreamConnectionFailed"
          ],
          "title": "ResponseStreamConnectionFailedCodexErrorInfo",
          "type": "object"
        },
        {
          "additionalProperties": false,
          "description": "The response SSE stream disconnected in the middle of a turn before completion.",
          "properties": {
            "responseStreamDisconnected": {
              "properties": {
                "httpStatusCode": {
                  "format": "uint16",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                }
              },
              "type": "object"
            }
          },
          "required": [
            "responseStreamDisconnected"
          ],
          "title": "ResponseStreamDisconnectedCodexErrorInfo",
          "type": "object"
        },
        {
          "additionalProperties": false,
          "description": "Reached the retry limit for responses.",
          "properties": {
            "responseTooManyFailedAttempts": {
              "properties": {
                "httpStatusCode": {
                  "format": "uint16",
                  "minimum": 0.0,
                  "type": [
                    "integer",
                    "null"
                  ]
                }
              },
              "type": "object"
            }
          },
          "required": [
            "responseTooManyFailedAttempts"
          ],
          "title": "ResponseTooManyFailedAttemptsCodexErrorInfo",
          "type": "object"
        }
      ]
    },
    "CommandAction": {
      "oneOf": [
        {
          "properties": {
            "command": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "type": {
              "enum": [
                "read"
              ],
              "title": "ReadCommandActionType",
              "type": "string"
            }
          },
          "required": [
            "command",
            "name",
            "path",
            "type"
          ],
          "title": "ReadCommandAction",
          "type": "object"
        },
        {
          "properties": {
            "command": {
              "type": "string"
            },
            "path": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "enum": [
                "listFiles"
              ],
              "title": "ListFilesCommandActionType",
              "type": "string"
            }
          },
          "required": [
            "command",
            "type"
          ],
          "title": "ListFilesCommandAction",
          "type": "object"
        },
        {
          "properties": {
            "command": {
              "type": "string"
            },
            "path": {
              "type": [
                "string",
                "null"
              ]
            },
            "query": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "enum": [
                "search"
              ],
              "title": "SearchCommandActionType",
              "type": "string"
            }
          },
          "required": [
            "command",
            "type"
          ],
          "title": "SearchCommandAction",
          "type": "object"
        },
        {
          "properties": {
            "command": {
              "type": "string"
            },
            "type": {
              "enum": [
                "unknown"
              ],
              "title": "UnknownCommandActionType",
              "type": "string"
            }
          },
          "required": [
            "command",
            "type"
          ],
          "title": "UnknownCommandAction",
          "type": "object"
        }
      ]
    },
    "CommandExecutionStatus": {
      "enum": [
        "inProgress",
        "completed",
        "failed",
        "declined"
      ],
      "type": "string"
    },
    "ContentBlock": {
      "anyOf": [
        {
          "$ref": "#/definitions/TextContent"
        },
        {
          "$ref": "#/definitions/ImageContent"
        },
        {
          "$ref": "#/definitions/AudioContent"
        },
        {
          "$ref": "#/definitions/ResourceLink"
        },
        {
          "$ref": "#/definitions/EmbeddedResource"
        }
      ]
    },
    "EmbeddedResource": {
      "description": "The contents of a resource, embedded into a prompt or tool call result.\n\nIt is up to the client how best to render embedded resources for the benefit of the LLM and/or the user.",
      "properties": {
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/definitions/Annotations"
            },
            {
              "type": "null"
            }
          ]
        },
        "resource": {
          "$ref": "#/definitions/EmbeddedResourceResource"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "resource",
        "type"
      ],
      "type": "object"
    },
    "EmbeddedResourceResource": {
      "anyOf": [
        {
          "$ref": "#/definitions/TextResourceContents"
        },
        {
          "$ref": "#/definitions/BlobResourceContents"
        }
      ]
    },
    "FileUpdateChange": {
      "properties": {
        "diff": {
          "type": "string"
        },
        "kind": {
          "$ref": "#/definitions/PatchChangeKind"
        },
        "path": {
          "type": "string"
        }
      },
      "required": [
        "diff",
        "kind",
        "path"
      ],
      "type": "object"
    },
    "GitInfo": {
      "properties": {
        "branch": {
          "type": [
            "string",
            "null"
          ]
        },
        "originUrl": {
          "type": [
            "string",
            "null"
          ]
        },
        "sha": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "type": "object"
    },
    "ImageContent": {
      "description": "An image provided to or from an LLM.",
      "properties": {
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/definitions/Annotations"
            },
            {
              "type": "null"
            }
          ]
        },
        "data": {
          "type": "string"
        },
        "mimeType": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "data",
        "mimeType",
        "type"
      ],
      "type": "object"
    },
    "McpToolCallError": {
      "properties": {
        "message": {
          "type": "string"
        }
      },
      "required": [
        "message"
      ],
      "type": "object"
    },
    "McpToolCallResult": {
      "properties": {
        "content": {
          "items": {
            "$ref": "#/definitions/ContentBlock"
          },
          "type": "array"
        },
        "structuredContent": true
      },
      "required": [
        "content"
      ],
      "type": "object"
    },
    "McpToolCallStatus": {
      "enum": [
        "inProgress",
        "completed",
        "failed"
      ],
      "type": "string"
    },
    "PatchApplyStatus": {
      "enum": [
        "inProgress",
        "completed",
        "failed",
        "declined"
      ],
      "type": "string"
    },
    "PatchChangeKind": {
      "oneOf": [
        {
          "properties": {
            "type": {
              "enum": [
                "add"
              ],
              "title": "AddPatchChangeKindType",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "title": "AddPatchChangeKind",
          "type": "object"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "delete"
              ],
              "title": "DeletePatchChangeKindType",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "title": "DeletePatchChangeKind",
          "type": "object"
        },
        {
          "properties": {
            "move_path": {
              "type": [
                "string",
                "null"
              ]
            },
            "type": {
              "enum": [
                "update"
              ],
              "title": "UpdatePatchChangeKindType",
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "title": "UpdatePatchChangeKind",
          "type": "object"
        }
      ]
    },
    "ResourceLink": {
      "description": "A resource that the server is capable of reading, included in a prompt or tool call result.\n\nNote: resource links returned by tools are not guaranteed to appear in the results of `resources/list` requests.",
      "properties": {
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/definitions/Annotations"
            },
            {
              "type": "null"
            }
          ]
        },
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "mimeType": {
          "type": [
            "string",
            "null"
          ]
        },
        "name": {
          "type": "string"
        },
        "size": {
          "format": "int64",
          "type": [
            "integer",
            "null"
          ]
        },
        "title": {
          "type": [
            "string",
            "null"
          ]
        },
        "type": {
          "type": "string"
        },
        "uri": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "uri"
      ],
      "type": "object"
    },
    "Role": {
      "description": "The sender or recipient of messages and data in a conversation.",
      "enum": [
        "assistant",
        "user"
      ],
      "type": "string"
    },
    "SessionSource": {
      "enum": [
        "cli",
        "vscode",
        "exec",
        "appServer",
        "unknown"
      ],
      "type": "string"
    },
    "TextContent": {
      "description": "Text provided to or from an LLM.",
      "properties": {
        "annotations": {
          "anyOf": [
            {
              "$ref": "#/definitions/Annotations"
            },
            {
              "type": "null"
            }
          ]
        },
        "text": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      },
      "required": [
        "text",
        "type"
      ],
      "type": "object"
    },
    "TextResourceContents": {
      "properties": {
        "mimeType": {
          "type": [
            "string",
            "null"
          ]
        },
        "text": {
          "type": "string"
        },
        "uri": {
          "type": "string"
        }
      },
      "required": [
        "text",
        "uri"
      ],
      "type": "object"
    },
    "Thread": {
      "properties": {
        "cliVersion": {
          "description": "Version of the CLI that created the thread.",
          "type": "string"
        },
        "createdAt": {
          "description": "Unix timestamp (in seconds) when the thread was created.",
          "format": "int64",
          "type": "integer"
        },
        "cwd": {
          "description": "Working directory captured for the thread.",
          "type": "string"
        },
        "gitInfo": {
          "anyOf": [
            {
              "$ref": "#/definitions/GitInfo"
            },
            {
              "type": "null"
            }
          ],
          "description": "Optional Git metadata captured when the thread was created."
        },
        "id": {
          "type": "string"
        },
        "modelProvider": {
          "description": "Model provider used for this thread (for example, 'openai').",
          "type": "string"
        },
        "path": {
          "description": "[UNSTABLE] Path to the thread on disk.",
          "type": "string"
        },
        "preview": {
          "description": "Usually the first user message in the thread, if available.",
          "type": "string"
        },
        "source": {
          "allOf": [
            {
              "$ref": "#/definitions/SessionSource"
            }
          ],
          "description": "Origin of the thread (CLI, VSCode, codex exec, codex app-server, etc.)."
        },
        "turns": {
          "description": "Only populated on a `thread/resume` response. For all other responses and notifications returning a Thread, the turns field will be an empty list.",
          "items": {
            "$ref": "#/definitions/Turn"
          },
          "type": "array"
        }
      },
      "required": [
        "cliVersion",
        "createdAt",
        "cwd",
        "id",
        "modelProvider",
        "path",
        "preview",
        "source",
        "turns"
      ],
      "type": "object"
    },
    "ThreadItem": {
      "oneOf": [
        {
          "properties": {
            "content": {
              "items": {
                "$ref": "#/definitions/UserInput"
              },
              "type": "array"
            },
            "id": {
              "type": "string"
            },
            "type": {
              "enum": [
                "userMessage"
              ],
              "title": "UserMessageThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "content",
            "id",
            "type"
          ],
          "title": "UserMessageThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "text": {
              "type": "string"
            },
            "type": {
              "enum": [
                "agentMessage"
              ],
              "title": "AgentMessageThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "text",
            "type"
          ],
          "title": "AgentMessageThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "content": {
              "default": [],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "id": {
              "type": "string"
            },
            "summary": {
              "default": [],
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "type": {
              "enum": [
                "reasoning"
              ],
              "title": "ReasoningThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "type"
          ],
          "title": "ReasoningThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "aggregatedOutput": {
              "description": "The command's output, aggregated from stdout and stderr.",
              "type": [
                "string",
                "null"
              ]
            },
            "command": {
              "description": "The command to be executed.",
              "type": "string"
            },
            "commandActions": {
              "description": "A best-effort parsing of the command to understand the action(s) it will perform. This returns a list of CommandAction objects because a single shell command may be composed of many commands piped together.",
              "items": {
                "$ref": "#/definitions/CommandAction"
              },
              "type": "array"
            },
            "cwd": {
              "description": "The command's working directory.",
              "type": "string"
            },
            "durationMs": {
              "description": "The duration of the command execution in milliseconds.",
              "format": "int64",
              "type": [
                "integer",
                "null"
              ]
            },
            "exitCode": {
              "description": "The command's exit code.",
              "format": "int32",
              "type": [
                "integer",
                "null"
              ]
            },
            "id": {
              "type": "string"
            },
            "processId": {
              "description": "Identifier for the underlying PTY process (when available).",
              "type": [
                "string",
                "null"
              ]
            },
            "status": {
              "$ref": "#/definitions/CommandExecutionStatus"
            },
            "type": {
              "enum": [
                "commandExecution"
              ],
              "title": "CommandExecutionThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "command",
            "commandActions",
            "cwd",
            "id",
            "status",
            "type"
          ],
          "title": "CommandExecutionThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "changes": {
              "items": {
                "$ref": "#/definitions/FileUpdateChange"
              },
              "type": "array"
            },
            "id": {
              "type": "string"
            },
            "status": {
              "$ref": "#/definitions/PatchApplyStatus"
            },
            "type": {
              "enum": [
                "fileChange"
              ],
              "title": "FileChangeThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "changes",
            "id",
            "status",
            "type"
          ],
          "title": "FileChangeThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "arguments": true,
            "error": {
              "anyOf": [
                {
                  "$ref": "#/definitions/McpToolCallError"
                },
                {
                  "type": "null"
                }
              ]
            },
            "id": {
              "type": "string"
            },
            "result": {
              "anyOf": [
                {
                  "$ref": "#/definitions/McpToolCallResult"
                },
                {
                  "type": "null"
                }
              ]
            },
            "server": {
              "type": "string"
            },
            "status": {
              "$ref": "#/definitions/McpToolCallStatus"
            },
            "tool": {
              "type": "string"
            },
            "type": {
              "enum": [
                "mcpToolCall"
              ],
              "title": "McpToolCallThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "arguments",
            "id",
            "server",
            "status",
            "tool",
            "type"
          ],
          "title": "McpToolCallThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "query": {
              "type": "string"
            },
            "type": {
              "enum": [
                "webSearch"
              ],
              "title": "WebSearchThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "query",
            "type"
          ],
          "title": "WebSearchThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "items": {
              "items": {
                "$ref": "#/definitions/TodoItem"
              },
              "type": "array"
            },
            "type": {
              "enum": [
                "todoList"
              ],
              "title": "TodoListThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "items",
            "type"
          ],
          "title": "TodoListThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "type": {
              "enum": [
                "imageView"
              ],
              "title": "ImageViewThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "path",
            "type"
          ],
          "title": "ImageViewThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "review": {
              "type": "string"
            },
            "type": {
              "enum": [
                "enteredReviewMode"
              ],
              "title": "EnteredReviewModeThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "review",
            "type"
          ],
          "title": "EnteredReviewModeThreadItem",
          "type": "object"
        },
        {
          "properties": {
            "id": {
              "type": "string"
            },
            "review": {
              "type": "string"
            },
            "type": {
              "enum": [
                "exitedReviewMode"
              ],
              "title": "ExitedReviewModeThreadItemType",
              "type": "string"
            }
          },
          "required": [
            "id",
            "review",
            "type"
          ],
          "title": "ExitedReviewModeThreadItem",
          "type": "object"
        }
      ]
    },
    "TodoItem": {
      "properties": {
        "completed": {
          "type": "boolean"
        },
        "id": {
          "type": "string"
        },
        "text": {
          "type": "string"
        }
      },
      "required": [
        "completed",
        "id",
        "text"
      ],
      "type": "object"
    },
    "Turn": {
      "oneOf": [
        {
          "properties": {
            "status": {
              "enum": [
                "completed"
              ],
              "title": "StatusTurnStatus",
              "type": "string"
            }
          },
          "required": [
            "status"
          ],
          "title": "StatusTurn",
          "type": "object"
        },
        {
          "properties": {
            "status": {
              "enum": [
                "interrupted"
              ],
              "title": "StatusTurn2Status",
              "type": "string"
            }
          },
          "required": [
            "status"
          ],
          "title": "StatusTurn2",
          "type": "object"
        },
        {
          "properties": {
            "error": {
              "$ref": "#/definitions/TurnError"
            },
            "status": {
              "enum": [
                "failed"
              ],
              "type": "string"
            }
          },
          "required": [
            "error",
            "status"
          ],
          "type": "object"
        },
        {
          "properties": {
            "status": {
              "enum": [
                "inProgress"
              ],
              "title": "StatusTurn3Status",
              "type": "string"
            }
          },
          "required": [
            "status"
          ],
          "title": "StatusTurn3",
          "type": "object"
        }
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "items": {
          "description": "Only populated on a `thread/resume` response. For all other responses and notifications returning a Turn, the items field will be an empty list.",
          "items": {
            "$ref": "#/definitions/ThreadItem"
          },
          "type": "array"
        }
      },
      "required": [
        "id",
        "items"
      ],
      "type": "object"
    },
    "TurnError": {
      "properties": {
        "codexErrorInfo": {
          "anyOf": [
            {
              "$ref": "#/definitions/CodexErrorInfo"
            },
            {
              "type": "null"
            }
          ]
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "message"
      ],
      "type": "object"
    },
    "UserInput": {
      "oneOf": [
        {
          "properties": {
            "text": {
              "type": "string"
            },
            "type": {
              "enum": [
                "text"
              ],
              "title": "TextUserInputType",
              "type": "string"
            }
          },
          "required": [
            "text",
            "type"
          ],
          "title": "TextUserInput",
          "type": "object"
        },
        {
          "properties": {
            "type": {
              "enum": [
                "image"
              ],
              "title": "ImageUserInputType",
              "type": "string"
            },
            "url": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "url"
          ],
          "title": "ImageUserInput",
          "type": "object"
        },
        {
          "properties": {
            "path": {
              "type": "string"
            },
            "type": {
              "enum": [
                "localImage"
              ],
              "title": "LocalImageUserInputType",
              "type": "string"
            }
          },
          "required": [
            "path",
            "type"
          ],
          "title": "LocalImageUserInput",
          "type": "object"
        }
      ]
    }
  },
  "properties": {
    "thread": {
      "$ref": "#/definitions/Thread"
    }
  },
  "required": [
    "thread"
  ],
  "title": "ThreadStartedNotification",
  "type": "object"
}